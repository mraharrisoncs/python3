(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[294],{1208:function(e,t,a){"use strict";a.d(t,"r",(function(){return f})),a.d(t,"g",(function(){return E})),a.d(t,"f",(function(){return C})),a.d(t,"j",(function(){return p})),a.d(t,"q",(function(){return S})),a.d(t,"o",(function(){return _})),a.d(t,"x",(function(){return g})),a.d(t,"b",(function(){return N})),a.d(t,"B",(function(){return A})),a.d(t,"H",(function(){return I})),a.d(t,"I",(function(){return b})),a.d(t,"C",(function(){return R})),a.d(t,"A",(function(){return O})),a.d(t,"e",(function(){return T})),a.d(t,"n",(function(){return y})),a.d(t,"i",(function(){return P})),a.d(t,"T",(function(){return v})),a.d(t,"J",(function(){return U})),a.d(t,"p",(function(){return D})),a.d(t,"h",(function(){return M})),a.d(t,"k",(function(){return w})),a.d(t,"R",(function(){return V})),a.d(t,"S",(function(){return B})),a.d(t,"m",(function(){return F})),a.d(t,"z",(function(){return k})),a.d(t,"G",(function(){return H})),a.d(t,"a",(function(){return j})),a.d(t,"l",(function(){return G})),a.d(t,"E",(function(){return x})),a.d(t,"K",(function(){return Y})),a.d(t,"L",(function(){return W})),a.d(t,"w",(function(){return q})),a.d(t,"u",(function(){return $})),a.d(t,"v",(function(){return z})),a.d(t,"t",(function(){return X})),a.d(t,"s",(function(){return J})),a.d(t,"F",(function(){return Z})),a.d(t,"y",(function(){return Q})),a.d(t,"c",(function(){return K})),a.d(t,"D",(function(){return ee})),a.d(t,"d",(function(){return te})),a.d(t,"N",(function(){return ae})),a.d(t,"P",(function(){return ne})),a.d(t,"M",(function(){return re})),a.d(t,"Q",(function(){return ie})),a.d(t,"O",(function(){return oe}));var n=a(241),r=a.n(n),i=a(181),o=a(0),s=a(225),c=a(817),l=a.n(c),d=a(11),u=a.n(d),m=(a(5),a(1720)),h=a.n(m);const f=(e,t)=>{switch(e){case i.a.REQUIRED:return t("required","Required");case i.a.INVALID_EMAIL:return t("status-invite-0","Invalid email address");case i.a.DUPLICATE_EMAIL:return t("duplicate-email","Email has already been added");case i.a.INVALID_RESOURCE_TITLE:return t("invalid-resource-title","These characters are not allowed &, *, =, +, @, $, ^, %, . , /, <, >, #, {, }, |, ~");case i.a.PLEASE_SELECT_RESOURCE_TITLE:return t("please-select-resource-title","Please add title");case i.a.INVALID_US_CA_PHONE_NUMBER:case i.a.INVALID_PHONE_NUMBER:return t("please_enter_a_valid_phone_no","Please enter a valid phone number");case i.a.INVALID_WEBSITE:return t("please_enter_a_valid_website","Please enter a valid website");case i.a.INVALID_ZIP:return t("please_enter_a_valid_zip_code","Please enter a valid zip code");case i.a.INVALID_INSTITUTION_NAME:return t("please_enter_a_valid_name","Please enter a valid name");case i.a.TOO_MANY_EMAILS_ENTERED:return t("exceed-num-of-parents-invited","You have exceeded the number of parents you can connect per child.");case i.a.INVALID_PASSWORD:return t("invalid-password","Must be 6+ characters");case i.a.PASSWORD_DOESNT_MATCH:return t("doesnt-match","Passwords don't match");case i.a.PLEASE_ENTER_PROFILE_URL:return t("please-enter-profile-url","Please enter a profile url.");case i.a.PLEASE_ENTER_PASSWORD:return t("please-enter-password","Please enter password");case i.a.INVALID_FIRST_NAME:return t("invalid-first-name","Invalid first name");case i.a.INVALID_LAST_NAME:return t("invalid-last-name","Invalid last name");case i.a.INVALID_PROFILE_URL:return t("invalid-profile-url","Invalid profile url");case i.a.INVALID_LENGTH_TOO_LONG:return t("invalid-max-length-too-long","Input is too long");case i.a.PRIMARY_SECONDARY_EMAIL_SAME:return t("primary-secondary-email-same","Your primary and secondary emails cannot be the same.");case i.a.USER_ALREADY_CONNECTED:return t("parent-already-connected-with-student","You are already connected with this student.");case i.a.INVALID_CODE:return t("invalid-code","Invalid Code");case i.a.ALREADY_IN_CLASS:return t("parent-already-joined-class","You have already joined this class");case i.a.CHILD_IN_GROUP:return t("child-already-in-class","You are already connected to this class through your child.");case i.a.INVALID_DEGREE_TITLE:return t("invalid-degree-title","Invalid degree title");case i.a.INVALID_SCHOOL_NAME:return t("invalid-school-name","Invalid school name");case i.a.INVALID_DAY_HOURS:return t("invalid-day-hours","Invalid day/hours");case i.a.INVALID_CLASS_PERIOD:return t("invalid-class-period","Invalid class period");case i.a.INVALID_CLASS_SUBJECT:return t("invalid-class-subject","Invalid class subject");case i.a.INVALID_BUILDING_ROOM:return t("invalid-building-room","Invalid building/room");case i.a.INVALID_RECIPIENTS:return t("no-receiver-err","Select recipients for your message");case i.a.PROFILE_URL_CANNOT_BE_NUMERIC:return t("profile-url-non-numeric","Profile url cannot be numeric");case i.a.ALREADY_MEMBER_OF_GROUP:return t("already_member_of_group","You are already a member of this group");case i.a.UNTITLED_IN_RESOURCE_TITLE:return t("untitled-in-resource-title","Please provide meaningful quiz title");case i.a.INVALID_INPUT_TEXT:return t("html-tags-not-allowed","HTML tags are not allowed.");case i.a.INVALID_MAXLENGTH_TITLE:return t("max-lenght-less-than-count","Ensure this value has at most %{count} characters.",{count:80});case i.a.INVALID_MAXLENGTH_DESC:return t("max-lenght-less-than-count","Ensure this value has at most %{count} characters.",{count:4e3});case i.a.INVALID_MAXLENGTH_NOTE:return t("max-lenght-less-than-count","Ensure this value has at most %{count} characters.",{count:512});case i.a.SHOULD_NOT_HAVE_SPECIAL_CHAR:return t("invalid-collection-name","These characters are not allowed &, *, =, +, @, $, ^, %, ., /, <, >, #, {, }, |, ~");case i.a.SHOULD_NOT_HAVE_SOME_SPECIAL_CHAR:return t("invalid-some-special-char-in-desc","These characters are not allowed @, $, ^, %, <, >, #, {, }, |, ~");case i.a.DESC_NOT_HAVE_SPECIAL_CHAR:return t("invalid-special-char-in-desc","These characters are not allowed {, }, ~");case i.a.INVALID_MIN_WORDS_DESC:return t("min-word-length-description-message","Description must be of minimum 15 words");case i.a.INVALID_MIN_CHARS_DESC:return t("min-char-length-description-message","Description must be of minimum 15 chars");case i.a.INVALID_SHARE_LINK:return t("invalid-url","Enter valid Url");case i.a.INVALID_PRICE:return t("invalid-price-msg","Price must be numeric");case i.a.INVALID_MIN_PRICE_USD:return t("invalid-min-price-msg","Minimum price for this currency is %{minPrice}",{minPrice:"0.99"});case i.a.INVALID_MIN_PRICE_GBP:return t("invalid-min-price-msg","Minimum price for this currency is %{minPrice}",{minPrice:"1.00"});case i.a.INVALID_MIN_PRICE_JPY:return t("invalid-min-price-msg","Minimum price for this currency is %{minPrice}",{minPrice:"150.00"});case i.a.FULL_PRICE_LESS_THAN_PRICE:return t("invalid-full-price-msg","Full price should not be less than Price");case i.a.INVALID_PRICE_DECIMAL_PLACE:return t("invalid-price-decimal-place","Only two digit after decimal digits allowed");case i.a.INVALID_PRICE_MAXLENGTH:return t("invalid-price-maxlenght-numeric","Only eight digit numeric allowed");case i.a.INVALID_PRICE_NUMERIC:return t("invalid-price-msg","Price must be numeric");case i.a.ALLOWED_TO_RATE_ONCE:return t("allowed-to-rate-once","You are allowed to rate once.");case i.a.EMAIL_TAKEN:return t("email-taken","Email is already taken.");default:return t("required","Required")}},E=e=>{if(e&&(0===e.length||!e.trim())||!e)return i.a.REQUIRED},C=e=>{if(!e||0===e.length)return i.a.INVALID_RECIPIENTS},p=e=>{if(!e)return i.a.PLEASE_SELECT_GRADE},S=e=>{if(!e)return i.a.PLEASE_SELECT_SUBJECT},_=e=>{if(!e)return i.a.PLEASE_SELECT_SCHOOL_CLASS_OWNER},g=e=>e&&!i.a.EMAIL_REGEXP.test(e)?i.a.INVALID_EMAIL:void 0,N=e=>!!e&&i.a.EMAIL_REGEXP.test(e),A=e=>e&&!/([+]?\d{1,2}[(.-\s]?)?(\d{2,3}[).-]?){2}\d{3,4}/.test(e)?i.a.INVALID_PHONE_NUMBER:void 0,I=e=>e&&!/^((https?|ftp|smtp):\/\/)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/.test(e)?i.a.INVALID_WEBSITE:void 0,b=e=>e&&!/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e)?i.a.INVALID_ZIP:void 0,R=e=>{const t=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;return e.ip_start||e.ip_end?!e.ip_start||e.ip_start&&!t.test(e.ip_start)?i.a.INVALID_START_IP:!e.ip_end||e.ip_end&&!t.test(e.ip_end)?i.a.INVALID_END_IP:void 0:i.a.EMPTY_IP_RANGE},O=e=>{const t=h()("^[\\pL0-9 :'_-]{1,100}$");return e&&!t.test(e)?i.a.INVALID_INSTITUTION_NAME:void 0},T=e=>e&&isNaN(Number(e))?i.a.MUST_BE_A_NUMBER:void 0,y=e=>e&&/[&*=+@$^%./<>#{}|~]/.test(e)?i.a.INVALID_RESOURCE_TITLE:e&&e.toLowerCase().includes("untitled")?i.a.UNTITLED_IN_RESOURCE_TITLE:!e&&i.a.PLEASE_SELECT_RESOURCE_TITLE,P=e=>e&&/[{}~]/.test(e)?i.a.INVALID_DESCRIPTION:!e&&i.a.PLEASE_ADD_DESCRIPTION,v=e=>{if(e)return L(e)?void 0:i.a.INVALID_US_CA_PHONE_NUMBER},L=e=>{if(!e)return!1;const t=new r.a(e);return!!t.isValid(e)||t.isValid(e)},U=e=>{if(!e)return;const t=e.split(",");if(t&&t.length>10)return i.a.TOO_MANY_EMAILS_ENTERED;for(let a=0;a<t.length;a++)if(!i.a.EMAIL_REGEXP.test(t[a].trim()))return i.a.INVALID_EMAIL},D=e=>{if(!e)return i.a.PLEASE_SELECT_SUBJECT},M=e=>{if(!e)return i.a.PLEASE_CHOOSE_COUNTRY},w=(e,t)=>{if(!e&&t&&t.revalidateAddSchoolForm)return i.a.REQUIRED},V=e=>{let t=!1;return!e||l()(e)?t=i.a.REQUIRED:e&&e.length<6&&(t=i.a.INVALID_PASSWORD),t},B=e=>{if(!o.Map.isMap(e))return;const t={},a=e.get("currentPassword")&&e.get("currentPassword").trim(),n=e.get("newPassword")&&e.get("newPassword").trim(),r=e.get("confirmPassword")&&e.get("confirmPassword").trim();return a||(t.currentPassword=i.a.REQUIRED),n?n&&n.length<6&&(t.newPassword=i.a.INVALID_PASSWORD):t.newPassword=i.a.REQUIRED,r?n&&r&&n!==r&&(t.confirmPassword=i.a.PASSWORD_DOESNT_MATCH):t.confirmPassword=i.a.REQUIRED,t},F=e=>{if(!e)return i.a.PLEASE_ENTER_PROFILE_URL},k=e=>{let t=!1;return(e&&!e.trim()||!e||6!==e.length)&&(t=i.a.INCORRECT_CODE),t},H=e=>{let t=!1;return(e&&!e.trim()||!e||e.length>25||e.length<3||!/^[a-zA-Z0-9][a-zA-Z0-9_-]+[a-zA-Z0-9]$/.test(e))&&(t=i.a.INVALID_USERNAME),t},j=e=>{if(e&&!e.trim()||!e)return i.a.INCORRECT_CODE},G=e=>{if(e&&!e.trim()||!e)return i.a.PLEASE_ENTER_PASSWORD},x=e=>/^[a-z0-9]+([-]{1}[a-z0-9]+)*$/i.test(e)?isNaN(Number(e))?void 0:i.a.PROFILE_URL_CANNOT_BE_NUMERIC:i.a.INVALID_PROFILE_URL,Y=(e,t)=>{if(!o.Map.isMap(e)||!t||!o.Map.isMap(t.initialValues))return;const a={},n=e.get("email")&&e.get("email").trim(),r=e.get("secondary_email")&&e.get("secondary_email").trim(),s=t&&t.initialValues.get("email");return n&&r&&n===r&&(s!==n?a.email=i.a.PRIMARY_SECONDARY_EMAIL_SAME:a.secondary_email=i.a.PRIMARY_SECONDARY_EMAIL_SAME),a},W=e=>{if(!o.Map.isMap(e))return;const t={},a=s.a.getListOfMonths(),n=e.get("currently_working"),r=e.get("end_year")&&parseInt(e.get("end_year")),c=e.get("start_year")&&parseInt(e.get("start_year"));var l=0,d=0;const m=u()();a.map((t,a)=>(t[1]===e.get("starting_month")?d=a:t[1]===e.get("ending_month")&&(l=a),t));const h=u()().date(1).month(d).year(c),f=u()().date(1).month(l).year(r);return n?u()(h).isAfter(m)&&(t.starting_month=i.a.SELECTED_FUTURE_MONTH):u()(h).isAfter(f)?t.end_year=i.a.END_BEFORE_START:u()(h).isAfter(m)?t.starting_month=i.a.SELECTED_FUTURE_MONTH:u()(f).isAfter(m)?t.ending_month=i.a.SELECTED_FUTURE_MONTH:u()(h).isSame(f)&&(t.end_year=i.a.END_BEFORE_START),t},q=e=>/^[-+.,:/ \w\W]+$/.test(e)?e.length>100?i.a.INVALID_LENGTH_TOO_LONG:void 0:i.a.INVALID_DEGREE_TITLE,$=e=>/^[-+.,:()"'/ \w\W]+$/.test(e)?e.length>50?i.a.INVALID_LENGTH_TOO_LONG:void 0:i.a.INVALID_CLASS_SUBJECT,z=e=>/^[-+.,:()"'/ \w\W]+$/.test(e)?e.length>50?i.a.INVALID_LENGTH_TOO_LONG:void 0:i.a.INVALID_DAY_HOURS,X=e=>{if(!/^(?=.{1,35}$)[a-zA-Z0-9]+(?:['_.\s][a-zA-Z0-9]+)*$/.test(e))return i.a.INVALID_CLASS_PERIOD},J=e=>/^[-+.,:()"'/ \w\W]+$/.test(e)?e.length>15?i.a.INVALID_LENGTH_TOO_LONG:void 0:i.a.INVALID_BUILDING_ROOM,Z=e=>/^[-+.,:/ \w\W]+$/.test(e)?e.length>80?i.a.INVALID_LENGTH_TOO_LONG:void 0:i.a.INVALID_SCHOOL_NAME,Q=e=>{if(/<.*>/.test(e))return i.a.INVALID_FIRST_NAME},K=e=>{let t=!1;return/<.*>/.test(e)&&(t=!0),t},ee=e=>{if(/<.*>/.test(e))return i.a.INVALID_LAST_NAME},te=e=>{let t=!1;return/<.*>/.test(e)&&(t=!0),t},ae=e=>{if(/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/.test(e))return i.a.INVALID_INPUT_TEXT},ne=e=>{if(e&&e.length>512)return i.a.INVALID_MAXLENGTH_NOTE},re=e=>{if(/[{}~]/.test(e))return i.a.DESC_NOT_HAVE_SPECIAL_CHAR},ie=e=>{if(e&&e.length>256)return i.a.INVALID_MAXLENGTH_SHORT_DESC},oe=e=>{if(e&&e.length>2e3)return i.a.INVALID_MAXLENGTH_LONG_DESC}},1238:function(e,t,a){"use strict";var n=a(4),r=a.n(n),i=a(364),o=a(1208),s=a(509);t.a=Object(s.a)(({input:e,label:t,placeholder:a,type:n="text",translate:s,maxLength:c,className:l="qa-test-folder-name",autoFocus:d=!1,meta:u,customError:m})=>{const h=u&&u.touched,f=m||u&&u.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.D,Object.assign({type:n,placeholder:t||a,className:l,maxLength:c},e,{onBlur:e&&e.onBlur,onPaste:e&&e.onPaste,onChange:e&&e.onChange,onFocus:e&&e.onFocus},d&&{autoFocus:d})),h&&f&&r.a.createElement("small",{className:"required-error qa-test-required-code-error"},Object(o.r)(f,s)))})},1534:function(e,t,a){"use strict";var n=a(4),r=a.n(n),i=a(364),o=a(509),s=a(156);t.a=Object(o.a)(({showConfirmEmailModal:e,handleToggleConfirmEmailModal:t,handleEmailVerification:a,verificationEmailSent:n,emailForVerification:o})=>r.a.createElement("div",{className:"email-verification-container"},r.a.createElement(i.M,{isOpen:e,toggle:t,className:"modal-md",backdrop:"static"},r.a.createElement(i.P,{toggle:t},n?r.a.createElement(s.default,{string:"verify-your-email",fallbackString:"Verify Your Email Address"}):r.a.createElement(s.default,{string:"resend-confirmation-email",fallbackString:"Resend Confirmation Email"})),r.a.createElement(i.N,null,n?r.a.createElement("div",{className:"email-verification-message-body"},r.a.createElement(s.default,{string:"email-verification-sent",fallbackString:"A verification email has been sent to %{email}",insertions:{email:o}})):r.a.createElement("div",{className:"email-verification-message-body"},r.a.createElement("p",null,o),r.a.createElement(i.c,{color:"primary",className:"qa-test-resend-email-submit",onClick:a},r.a.createElement(s.default,{string:"resend_confirmation_email",fallbackString:"Re-send Confirmation Email"})))),r.a.createElement(i.O,null))))},1999:function(e,t,a){},2076:function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"f",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"d",(function(){return m}));var n=a(9),r=a(1),i=a(28);const o=Object(n.createSelector)([i.Ab],e=>e&&e.get(r.a.NOTIFICATIONS_SUBSCRIPTION)),s=Object(n.createSelector)([i.Ab],e=>e&&e.get(r.a.USER_MOBILE_NUMBERS)),c=Object(n.createSelector)([i.Ab],e=>e&&e.get(r.a.PRIVACY_SETTINGS)),l=Object(n.createSelector)([i.Ab],e=>e&&e.get(r.a.COUNTRY_LIST)),d=Object(n.createSelector)([i.Ab],e=>e&&e.get(r.a.STATES_LIST)),u=Object(n.createSelector)([i.Ab],e=>e&&e.get(r.a.RESEND_CONFIRMATION_CODE_ACCOUNT_RECOVERIES)),m=Object(n.createSelector)([i.Ab],e=>e&&e.get(r.a.SCHOOLS_LIST))},2080:function(e,t,a){"use strict";a.r(t),a.d(t,"fetchNotificationSubscriptionsSuccessAction",(function(){return l})),a.d(t,"fetchNotificationSubscriptionsErrorAction",(function(){return d})),a.d(t,"updateNotificationSubscriptionsSuccessAction",(function(){return u})),a.d(t,"updateNotificationSubscriptionsErrorAction",(function(){return m})),a.d(t,"fetchUserMobileNumbersSuccessAction",(function(){return h})),a.d(t,"fetchUserMobileNumbersErrorAction",(function(){return f})),a.d(t,"fetchUserPrivacySettingsSuccessAction",(function(){return E})),a.d(t,"fetchUserPrivacySettingsErrorAction",(function(){return C})),a.d(t,"updateUserPrivacySettingsSuccessAction",(function(){return p})),a.d(t,"updateUserPrivacySettingsErrorAction",(function(){return S})),a.d(t,"updateUserPhoneNumberSuccessAction",(function(){return _})),a.d(t,"updateUserPhoneNumberFailureAction",(function(){return g})),a.d(t,"verfiyUserPhoneNumberSuccessAction",(function(){return N})),a.d(t,"verfiyUserPhoneNumberFailureAction",(function(){return A})),a.d(t,"fetchCountriesSuccessAction",(function(){return I})),a.d(t,"fetchCountriesErrorAction",(function(){return b})),a.d(t,"fetchStatesSuccessAction",(function(){return R})),a.d(t,"fetchStatesErrorAction",(function(){return O})),a.d(t,"fetchResendConfirmationCodeSuccessAction",(function(){return T})),a.d(t,"fetchResendConfirmationCodeErrorAction",(function(){return y})),a.d(t,"fetchResendConfirmationCodeAgainSuccessAction",(function(){return P})),a.d(t,"fetchResendConfirmationCodeAgainErrorAction",(function(){return v})),a.d(t,"fetchVerifyConfirmationCodeSuccessAction",(function(){return L})),a.d(t,"fetchVerifyConfirmationCodeErrorAction",(function(){return U})),a.d(t,"fetchSchoolsListSuccessAction",(function(){return D})),a.d(t,"fetchSchoolsListErrorAction",(function(){return M})),a.d(t,"addNewSchoolSuccessAction",(function(){return w})),a.d(t,"addNewSchoolErrorAction",(function(){return V})),a.d(t,"deactivateAccountErrorAction",(function(){return B})),a.d(t,"deleteUserPhoneNumberSuccessAction",(function(){return F})),a.d(t,"verifyConfirmationCode",(function(){return k})),a.d(t,"resendConfirmationCode",(function(){return H})),a.d(t,"resendConfirmationCodeAgain",(function(){return j})),a.d(t,"deactivateUserAccount",(function(){return G})),a.d(t,"fetchUserNotificationSubscriptions",(function(){return x})),a.d(t,"updateNotificationSubscriptions",(function(){return Y})),a.d(t,"fetchUserMobileNumbers",(function(){return W})),a.d(t,"fetchUserPrivacySettings",(function(){return q})),a.d(t,"updateUserPrivacySettings",(function(){return $})),a.d(t,"fetchCountries",(function(){return z})),a.d(t,"fetchStates",(function(){return X})),a.d(t,"fetchSchoolsList",(function(){return J})),a.d(t,"updateUserPhoneNumber",(function(){return Z})),a.d(t,"addNewSchool",(function(){return Q})),a.d(t,"verifyUserPhoneNumber",(function(){return K})),a.d(t,"clearAddNewSchoolForm",(function(){return ee})),a.d(t,"deleteUserPhoneNumber",(function(){return te})),a.d(t,"clearAccountDeactivationForm",(function(){return ae}));var n=a(2117),r=a(187),i=a(36),o=a(46),s=a(227),c=a(152);const l=e=>({type:r.a.USER_NOTIFICATION_SUBSCRIPTIONS_FETCH_SUCCESS,payload:e}),d=e=>({type:r.a.USER_NOTIFICATION_SUBSCRIPTIONS_FETCH_ERROR,payload:e}),u=e=>({type:r.a.UPDATE_USER_NOTIFICATION_SUBSCRIPTIONS_SUCCESS,payload:e}),m=e=>({type:r.a.UPDATE_USER_NOTIFICATION_SUBSCRIPTIONS_ERROR,payload:e}),h=e=>({type:r.a.USER_MOBILE_NUMBER_FETCH_SUCCESS,payload:e}),f=e=>({type:r.a.USER_MOBILE_NUMBER_FETCH_ERROR,payload:e}),E=e=>({type:r.a.PRIVACY_SETTINGS_FETCH_SUCCESS,payload:e}),C=e=>({type:r.a.PRIVACY_SETTINGS_FETCH_ERROR,payload:e}),p=e=>({type:r.a.UPDATE_PRIVACY_SETTINGS_SUCCESS,payload:e}),S=e=>({type:r.a.UPDATE_PRIVACY_SETTINGS_ERROR,payload:e}),_=e=>({type:r.a.UPDATE_USER_PHONE_NUMBER_SUCESS,payload:e}),g=e=>({type:r.a.UPDATE_USER_PHONE_NUMBER_ERROR,payload:e}),N=e=>({type:r.a.VERIFY_USER_PHONE_NUMBER_SUCESS,payload:e}),A=e=>({type:r.a.VERIFY_USER_PHONE_NUMBER_ERROR,payload:e}),I=e=>({type:r.a.COUNTRY_LIST_FETH_SUCCESS,payload:e}),b=e=>({type:r.a.COUNTRY_LIST_FETH_ERROR,payload:e}),R=e=>({type:r.a.STATES_LIST_FETH_SUCCESS,payload:e}),O=e=>({type:r.a.STATES_LIST_FETH_ERROR,payload:e}),T=e=>({type:r.a.RESEND_CONFIRMATION_CODE_FETCH_SUCCESS,payload:e}),y=e=>({type:r.a.RESEND_CONFIRMATION_CODE_FETCH_ERROR,payload:e}),P=e=>({type:r.a.RESEND_CONFIRMATION_CODE_FETCH_SUCCESS_AGAIN,payload:e}),v=e=>({type:r.a.RESEND_CONFIRMATION_CODE_FETCH_ERROR_AGAIN,payload:e}),L=e=>({type:r.a.VERIFY_CONFIRMATION_CODE_FETCH_SUCCESS,payload:e}),U=e=>({type:r.a.VERIFY_CONFIRMATION_CODE_FETCH_ERROR,payload:e}),D=e=>({type:r.a.SCHOOLS_LIST_FETCH_SUCCESS,payload:e}),M=e=>({type:r.a.SCHOOLS_LIST_FETH_ERROR,payload:e}),w=e=>({type:r.a.ADD_NEW_SCHOOL_SUCCESS,payload:e}),V=e=>({type:r.a.ADD_NEW_SCHOOL_ERROR,payload:e}),B=e=>({type:r.a.DEACTIVATE_ACCOUNT_ERROR,payload:e}),F=e=>({type:r.a.DELETE_USER_PHONE_NUMBER_SUCCESS,payload:e}),k=(e,t,a)=>function(r,o){return n.o(e).then(e=>{r(L(e.data)),t&&t()}).catch(e=>{e&&e.response&&(404===e.response.status||400===e.response.status||500===e.response.status)?(a&&a(),r(U(e))):i.a.notifyBugsnag(e,"SettingsActionCreator.verifyConfirmationCode")})},H=(e,t,a)=>function(r,i){return n.j(e).then(e=>{a&&a(),r(T(e.data))}).catch(e=>{e&&e.response&&(t&&t(),r(y(e)),403===e.response.status&&r(Object(o.showSuccessGlobalAlert)("resend-error-too-many-attempts","Sorry, you have made too many attempts. Please try again in 24 hours")))})},j=(e,t,a)=>function(r,o){return n.k(e,t).then(e=>{r(P(e.data)),a&&a()}).catch(e=>{e&&e.response&&404===e.response.status?r(v(e)):i.a.notifyBugsnag(e,"SettingsActionCreator.resendConfirmationCodeAgain")})},G=(e,t,a)=>function(r,o){return n.b(e).then(e=>{t&&t()}).catch(e=>{e&&e.response&&404===e.response.status?r(B(e)):e&&e.response&&400===e.response.status?t&&t():e&&e.response&&403===e.response.status?a&&a():i.a.notifyBugsnag(e,"SettingsActionCreator.deactivateUserAccount")})},x=()=>function(e,t){return n.h().then(t=>{e(l(t.data))}).catch(t=>{t&&t.response&&404===t.response.status?e(d(t)):i.a.notifyBugsnag(t,"SettingsActionCreator.fetchUserNotificationSubscriptions")})},Y=(e,t,a,r)=>function(i,o){return n.l(e,t).then(e=>{i(u(e.data)),a()}).catch(e=>{e&&e.response&&404===e.response.status&&i(m(e)),r()})},W=()=>function(e,t){return n.g().then(t=>{e(h(t.data))}).catch(t=>{t&&t.response&&404===t.response.status?e(f(t)):i.a.notifyBugsnag(t,"SettingsActionCreator.fetchUserMobileNumbers")})},q=()=>function(e,t){return n.i().then(t=>{e(E(t.data))}).catch(t=>{t&&t.response&&e(C(t))})},$=(e,t,a)=>function(t,a){return n.n(e).then(e=>{t(p(e.data)),t(Object(o.showSuccessGlobalAlert)("settings-update-success-message","Your settings have been saved."))}).catch(e=>{e&&e.response&&404===e.response.status?(t(S(e)),t(Object(o.showErrorGlobalAlert)("internal-server-error","Something went wrong"))):i.a.notifyBugsnag(e,"SettingsActionCreator.updateUserPrivacySettings")})},z=()=>function(e,t){return n.d().then(t=>{e(I(t.data))}).catch(t=>{t&&t.response&&404===t.response.status?e(b(t)):i.a.notifyBugsnag(t,"SettingsActionCreator.fetchCountries")})},X=()=>function(e,t){return n.f().then(t=>{e(R(t.data))}).catch(t=>{t&&t.response&&404===t.response.status?e(O(t)):i.a.notifyBugsnag(t,"SettingsActionCreator.fetchStates")})},J=e=>function(t,a){return n.e(e).then(e=>{t(D(e.data))}).catch(e=>{e&&e.response&&404===e.response.status?t(M(e)):i.a.notifyBugsnag(e,"SettingsActionCreator.fetchSchoolsList")})},Z=(e,t)=>function(a,r){return n.m(e).then(e=>{a(_(e.data)),a(Object(o.showSuccessGlobalAlert)("phone-number-saved","Phone Number Saved.")),t&&t()}).catch(e=>{if(e&&e.response){a(g(e));const t=c.a.getUpdateUserPhoneNumberErrorMsg(e);t&&a(Object(o.showErrorGlobalAlert)(Object.keys(t)[0],Object.values(t)[0]))}})},Q=(e,t)=>function(a,r){return n.a(e).then(e=>{a(w(e.data)),t&&t(e.data)}).catch(e=>{e&&e.response&&404===e.response.status?a(V(e)):i.a.notifyBugsnag(e,"SettingsActionCreator.addNewSchool")})},K=(e,t)=>function(a,r){return n.p(e).then(e=>{a(N(e.data)),a(Object(o.showSuccessGlobalAlert)("phone_number_verified","Phone Number Verified.")),t&&t()}).catch(e=>{e&&e.response&&404===e.response.status?(a(A(e)),a(Object(o.showErrorGlobalAlert)("incorrect-code","Incorrect Code"))):i.a.notifyBugsnag(e,"SettingsActionCreator.verifyUserPhoneNumber")})},ee=()=>function(e){e(Object(s.c)("AddNewSchoolModal"))},te=e=>function(t,a){return n.c(e).then(e=>{t(F(e.data)),t(Object(o.showSuccessGlobalAlert)("phone-number-deleted","Phone Number Deleted."))}).catch(e=>{e&&e.response&&t(Object(o.showErrorGlobalAlert)("internal-server-error","Something went wrong"))})},ae=()=>function(e){e(Object(s.c)("AccountDeactivationForm"))}},2117:function(e,t,a){"use strict";a.d(t,"o",(function(){return s})),a.d(t,"j",(function(){return c})),a.d(t,"k",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"h",(function(){return u})),a.d(t,"l",(function(){return m})),a.d(t,"g",(function(){return h})),a.d(t,"i",(function(){return f})),a.d(t,"n",(function(){return E})),a.d(t,"d",(function(){return C})),a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return S})),a.d(t,"a",(function(){return _})),a.d(t,"m",(function(){return g})),a.d(t,"p",(function(){return N})),a.d(t,"c",(function(){return A}));var n=a(15),r=a(13),i=a(18),o=a(25);const s=e=>o.a.put("".concat(i.a.ACCOUNT_PASSWORD_RESETS).concat(i.a.VERIFY_USER),e),c=e=>o.a.post("".concat(i.a.ACCOUNT_RECOVERIES).concat(i.a.CREATE_FOR_VERIFICATION),e),l=(e,t)=>o.a.put("".concat(i.a.ACCOUNT_RECOVERIES,"/").concat(e),t),d=e=>o.a.post(i.a.UNREGISTER,e),u=()=>o.a.get(i.a.NOTIFICATION_SUBSCRIPTIONS),m=(e,t)=>o.a.put("".concat(i.a.NOTIFICATION_SUBSCRIPTIONS,"/").concat(e),t),h=()=>o.a.get(i.a.USER_MOBILE_NUMBER),f=()=>o.a.get(i.a.PRIVACY_SETTINGS),E=e=>o.a.put(i.a.PRIVACY_SETTINGS,e),C=()=>o.a.get(i.a.COUNTRY_LIST),p=()=>o.a.get(i.a.STATES_LIST),S=e=>o.a.get(i.a.SEARCH,Object(n.a)({[r.a.TYPE]:"search"},e)),_=e=>o.a.post(i.a.SCHOOLS,e),g=e=>o.a.post(i.a.USER_MOBILE_NUMBERS,e),N=e=>o.a.post("".concat(i.a.USER_MOBILE_NUMBERS).concat(i.a.VERIFY),e),A=e=>o.a.delete("".concat(i.a.USER_MOBILE_NUMBERS,"/").concat(e))},2134:function(e,t,a){"use strict";var n=a(4),r=a.n(n),i=a(364),o=a(133),s=a(272),c=a(156),l=a(1238),d=a(1208),u=a(509);t.a=Object(o.connect)(e=>({formValues:Object(s.getFormValues)("confirmPassword")(e)}))(Object(s.reduxForm)({form:"confirmPassword"})(Object(u.a)(({showConfirmPasswordModal:e,handleToggleConfirmPasswordModal:t,confirmUserAccountSubmit:a,handleSubmit:n,wrongConfirmPassword:o,handleConfirmPasswordChange:u,pristine:m,IsVerificationForProfile:h})=>r.a.createElement("div",{className:"password-verification-container"},r.a.createElement("form",{onSubmit:n},r.a.createElement(i.M,{isOpen:e,toggle:t,className:"modal-md",backdrop:"static"},r.a.createElement(i.P,{toggle:t},h?r.a.createElement(c.default,{string:"password-verification",fallbackString:"Please verify your password"}):r.a.createElement(c.default,{string:"verify-password-message",fallbackString:"To make these changes, please verify your password"})),r.a.createElement(i.N,null,r.a.createElement("div",{className:"password-verification-message-body"},r.a.createElement(i.C,null,r.a.createElement(s.Field,{name:"confirmPassword",className:"qa-test-confirm-password",component:l.a,type:"password",validate:d.g,onChange:u}),o&&r.a.createElement("small",{className:"required-error"},r.a.createElement(c.default,{string:"settings-update-wrong-password-message",fallbackString:"Incorrect Password"}))),r.a.createElement(i.c,{color:"primary",className:"qa-test-confirm-password-submit",disabled:m,onClick:a,type:"submit"},h?r.a.createElement(c.default,{string:"verify",fallbackString:"Verify"}):r.a.createElement(c.default,{string:"confirm_password",fallbackString:"Confirm Password"})))),r.a.createElement(i.O,null)))))))},2267:function(e,t,a){"use strict";var n=a(4),r=a.n(n),i=a(133),o=a(134),s=a(364),c=a(1314),l=a(73),d=a(1991),u=a(390),m=a(86),h=a(14),f=a(36),E=a(509),C=a(215),p=a(156),S=a(179);a(1999);class _ extends n.Component{constructor(e){super(e),this.state={schoolCode:"",hideSchoolContactBox:!1,showCodeVerificationError:!1},this.handleSchoolCodeNagBarDismiss=this.handleSchoolCodeNagBarDismiss.bind(this),this.handleSchoolCodeVerification=this.handleSchoolCodeVerification.bind(this),this.toggleSchoolCodeContact=this.toggleSchoolCodeContact.bind(this),this.handleSchoolCodeChange=this.handleSchoolCodeChange.bind(this)}componentDidMount(){h.a.getSchoolId(this.props.currentUser)&&this.props.schoolActions.fetchCurrentSchool(h.a.getSchoolId(this.props.currentUser),!0)}UNSAFE_componentWillReceiveProps(e){h.a.getSchoolId(this.props.currentUser)!==h.a.getSchoolId(e.currentUser)&&this.props.schoolActions.fetchCurrentSchool(h.a.getSchoolId(e.currentUser),!0)}handleSchoolCodeNagBarDismiss(){this.props.nagBarActions.updateNagBarStatus(C.a.SCHOOL_CODE_VERIFICATION,{increment_dismissal_count:!0})}handleSchoolCodeVerification(){const e={code:this.state.schoolCode};this.props.schoolActions.schoolCodeVerification(e).then(()=>{this.props.checkSchoolCodeVerification||this.setState({showCodeVerificationError:!0})}).catch(e=>{f.a.notifyBugsnag(e,"CodeVerificationNagbar.schoolCodeVerification")})}toggleSchoolCodeContact(){this.setState({hideSchoolContactBox:!this.state.hideSchoolContactBox})}handleSchoolCodeChange(e){this.setState({schoolCode:e.target.value})}render(){const e=m.a.getSchoolCodeContact(this.props.currentUserSchool);return r.a.createElement("div",{className:"school-verification-container"},r.a.createElement(s.u,{className:"no-padding"},r.a.createElement(s.j,{className:"sub-container rounded"},this.props.closable&&r.a.createElement("div",{className:"close-icon"},r.a.createElement("span",{className:"close",onClick:this.handleSchoolCodeNagBarDismiss})),this.props.context!==S.a.NAG_BAR&&!this.props.isMobileScreen&&r.a.createElement(s.f,{className:"left-pannel"},r.a.createElement(s.g,{className:"left-pannel-body"},r.a.createElement(s.p,{className:"left-pannel-text"},r.a.createElement(p.default,{string:"join-school-community",fallbackString:"Join your school community"})))),r.a.createElement(s.f,{className:"right-pannel"},r.a.createElement(s.g,{className:"right-pannel-body"},this.props.context===S.a.NAG_BAR&&this.props.isMobileScreen&&r.a.createElement(s.p,{className:"left-pannel-text"},r.a.createElement(p.default,{string:"join-school-community",fallbackString:"Join your school community"})),r.a.createElement(s.o,{className:"right-pannel-text"},r.a.createElement(p.default,{string:"join-school-code-description",fallbackString:"Enter your school code to share and participate in discussions with teachers, parents, administrators and members of your school community"})),r.a.createElement("div",{className:"input-group mb-1 row"},r.a.createElement("div",{className:"col-xs-4"},r.a.createElement(s.D,{className:"qa-test-enter-code-input enter-code-input ".concat(this.state.showCodeVerificationError?"code-validation-error":""),name:"schoolCode",placeholder:this.props.translate("enter-school-code","Enter School Code"),value:this.state.schoolCode,onChange:this.handleSchoolCodeChange})),r.a.createElement("div",{className:"input-group-btn col-xs-4"},r.a.createElement(s.c,{className:"submit-btn",onClick:this.handleSchoolCodeVerification,disabled:!this.state.schoolCode},r.a.createElement(p.default,{string:"submit",fallbackString:"Submit"}))),this.props.context===S.a.NAG_BAR&&r.a.createElement("div",{className:"dont-have-code-link col-xs-4"},r.a.createElement(s.m,{className:"no-code-link",onClick:this.toggleSchoolCodeContact},r.a.createElement(p.default,{string:"dont-have-code",fallbackString:"Don't have a code?"})))),this.state.showCodeVerificationError&&r.a.createElement("div",{className:"alert-danger-msg"},r.a.createElement(p.default,{string:"school-code-incorrect",fallbackString:"School code is incorrect"})),this.props.context!==S.a.NAG_BAR&&r.a.createElement(s.m,{className:"no-code-link",onClick:this.toggleSchoolCodeContact},r.a.createElement(p.default,{string:"dont-have-code",fallbackString:"Don't have a code?"})),r.a.createElement(s.t,{isOpen:this.state.hideSchoolContactBox},r.a.createElement("p",{className:"my-0_5"},e),r.a.createElement("a",{href:"https://support.edmodo.com/hc/en-us/articles/205011804",target:"_blank",rel:"noopener noreferrer",className:"learn-more-code-link"},r.a.createElement(p.default,{string:"learnMore",fallbackString:"Learn more"}))))))))}}t.a=Object(i.connect)((function(e,t){return{checkSchoolCodeVerification:c.a(e),currentUserSchool:c.g(e),currentUser:l.c(e)}}),(function(e){return{schoolActions:Object(o.bindActionCreators)(d,e),nagBarActions:Object(o.bindActionCreators)(u,e)}}))(Object(E.a)(_))},2343:function(e,t,a){},2390:function(e,t,a){"use strict";var n=a(15),r=a(4),i=a.n(r),o=a(133),s=a(134),c=a(364),l=a(73),d=a(2076),u=a(367),m=a(2080),h=a(509),f=(a(2343),a(77)),E=a(819),C=a(121),p=a(156),S=a(152);class _ extends r.Component{constructor(e){super(e),this.state={isConfirmationCodeVerifyError:!1,isConfirmationCodeVerified:!1,isConfirmationCodeSent:!1,isConfirmationCodeComplete:!1,confirmationCode:[]},this.handleToggleResendConfirmationCodeModal=this.handleToggleResendConfirmationCodeModal.bind(this),this.handleResendConfirmationCodeAgain=this.handleResendConfirmationCodeAgain.bind(this),this.handleVerifyConfirmationCode=this.handleVerifyConfirmationCode.bind(this),this.handleConfirmationCodeUserInput=this.handleConfirmationCodeUserInput.bind(this),this.handleBackSpace=this.handleBackSpace.bind(this),this.onVerifyConfirmationCodeSuccess=this.onVerifyConfirmationCodeSuccess.bind(this),this.onResendConfirmationCodeAgainSuccess=this.onResendConfirmationCodeAgainSuccess.bind(this),this.onVerifyConfirmationCodeError=this.onVerifyConfirmationCodeError.bind(this)}handleToggleResendConfirmationCodeModal(){this.setState({isConfirmationCodeSent:!1,isConfirmationCodeVerifyError:!1,isConfirmationCodeVerified:!1,isConfirmationCodeComplete:!1,confirmationCode:[]}),this.props.toggleModal()}handleResendConfirmationCodeAgain(){this.setState({isConfirmationCodeVerifyError:!1});const e=this.props.accountRecoveries&&this.props.accountRecoveries.toJSON(),t=Object(n.a)({},{account_recovery:{step:"resend_me_code"}},{},e),a=S.a.getAccountRecoveryId(this.props.accountRecoveries);this.props.settingsActions.resendConfirmationCodeAgain(a,t,this.onResendConfirmationCodeAgainSuccess)}handleVerifyConfirmationCode(){const e={account_password_reset:{code:parseInt(this.state.confirmationCode.join(""),10),payload:S.a.getAccountRecoveryPayload(this.props.accountRecoveries)}};this.props.settingsActions.verifyConfirmationCode(e,this.onVerifyConfirmationCodeSuccess,this.onVerifyConfirmationCodeError),this.setState({isConfirmationCodeComplete:!1})}handleConfirmationCodeUserInput(e){const t=parseInt(e.target.getAttribute("data-id"),10),a=e.which>=48&&e.which<=57||e.which>=96&&e.which<=105;this.setState({isConfirmationCodeVerifyError:!1,isConfirmationCodeVerified:!1,isConfirmationCodeComplete:!1}),6!==this.state.confirmationCode.length&&(a&&e.target.value&&0!==e.target.value.length?(this.state.confirmationCode.splice(t,0,e.target.value),e.target.nextElementSibling?e.target.nextElementSibling.focus():e.target.focus()):e.target.value=null),6===this.state.confirmationCode.length&&(this.setState({isConfirmationCodeComplete:!0}),this.handleVerifyConfirmationCode())}handleBackSpace(e){const t=parseInt(e.target.getAttribute("data-id"),10);46!==e.which&&8!==e.which||(e.target.value?(e.target.focus(),e.target.value=null,this.state.confirmationCode.splice(t,1)):(e.target.previousElementSibling.focus(),e.target.previousElementSibling.value=null,this.state.confirmationCode.splice(t-1,1)))}onVerifyConfirmationCodeSuccess(){this.setState({isConfirmationCodeVerified:!0}),this.props.settingsActions.fetchUserMobileNumbers(),setTimeout(()=>{this.handleToggleResendConfirmationCodeModal()},5e3)}onResendConfirmationCodeAgainSuccess(){this.setState({isConfirmationCodeSent:!0})}onVerifyConfirmationCodeError(){this.setState({isConfirmationCodeVerifyError:!0})}render(){const e=[0,1,2,3,4,5].map((e,t)=>i.a.createElement("input",{"data-id":e,key:t,className:"otp-input-section text-center qa-test-confirmation-code-input",type:"text",maxLength:"1",onKeyUp:e=>this.handleConfirmationCodeUserInput(e),onKeyDown:e=>this.handleBackSpace(e)}));return i.a.createElement("div",null,i.a.createElement(c.M,{isOpen:this.props.isResendConfirmationCodeModalOpen,toggle:this.handleToggleResendConfirmationCodeModal},i.a.createElement(c.P,{toggle:this.handleToggleResendConfirmationCodeModal}),i.a.createElement(c.N,null,i.a.createElement("div",{className:"phone-verification-modal-container"},i.a.createElement("div",{className:"phone-verification-layout"},i.a.createElement("div",{className:"header"},i.a.createElement(p.default,{string:"confirm-phone-number",fallbackString:"Please confirm your phone number"})),i.a.createElement("div",{className:"sub-section"},i.a.createElement(p.default,{string:"text-message-sent-information",fallbackString:"A text message with a confirmation code has been sent to the phone number "})," ".concat(this.props.phoneNumber)),i.a.createElement("div",{className:"sub-section"},i.a.createElement(p.default,{string:"didn't-get-code",fallbackString:"Didn't get the confirmation code?"}),this.state.isConfirmationCodeSent?i.a.createElement("span",{className:"code-sent"},i.a.createElement(p.default,{string:"code-sent",fallbackString:"Code Sent"})):i.a.createElement("button",{className:"btn btn-link qa-test-resend-code-again-button",onClick:this.handleResendConfirmationCodeAgain},i.a.createElement(p.default,{string:"resend-code",fallbackString:"Resend Code"}))),i.a.createElement("div",{className:"sub-section"},i.a.createElement(p.default,{string:"wrong-number",fallbackString:"Wrong number?"}),i.a.createElement(E.a,{to:f.a.makeSettingsPageUrl(C.a.DEFAULT_CONTENT),onClick:this.handleToggleResendConfirmationCodeModal,className:"link-section qa-test-edit-phone-link"},i.a.createElement(p.default,{string:"edit-phone-number",fallbackString:"Edit phone number"}))),i.a.createElement("div",{className:"verification-container"},i.a.createElement("div",{className:"enter_code_container"},i.a.createElement("p",{className:"enter_code_header"},i.a.createElement(p.default,{string:"enter-confirmation-code",fallbackString:"Enter your 6-digit confirmation code"})),e,this.state.isConfirmationCodeVerifyError&&i.a.createElement("p",{className:"verify-error"},i.a.createElement(p.default,{string:"invalid-code-message",fallbackString:"The confirmation code you entered is not valid. Please re-enter your confirmation code."})),this.state.isConfirmationCodeVerified&&i.a.createElement("p",{className:"phone-number-verified"},i.a.createElement(p.default,{string:"valid-code-message",fallbackString:"\u2713 Your phone number is confirmed."}))),i.a.createElement("div",{className:"verify-phone"},i.a.createElement("button",{type:"button",className:" btn btn-block btn-lg next-btn qa-test-next",onClick:()=>this.handleVerifyConfirmationCode(),disabled:!this.state.isConfirmationCodeComplete},i.a.createElement(p.default,{string:"resend-next",fallbackString:"Next"})),i.a.createElement("button",{type:"button",className:" btn btn-link remind-link qa-test-remind-later",onClick:this.handleToggleResendConfirmationCodeModal},i.a.createElement(p.default,{string:"remind-me-later",fallbackString:"Remind Me Later"}))))))),i.a.createElement(c.O,null)))}}t.a=Object(o.connect)((function(e,t){return{currentUser:l.c(e),abTestInfo:u.a(e),accountRecoveries:d.a(e)}}),(function(e){return{settingsActions:Object(s.bindActionCreators)(m,e)}}))(Object(h.a)(_))},2477:function(e,t,a){},2604:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),i=a(134),o=a(133),s=a(390),c=a(1991),l=a(215),d=a(179),u=a(559),m=a(511),h=a(73),f=a(2076),E=a(2267),C=a(14),p=a(561),S=a(15),_=a(364),g=a(367),N=a(509),A=a(1534),I=a(2134),b=a(156),R=a(10),O=a(272);class T extends n.Component{constructor(e){super(e),this.state={isSameEmail:!1,emailAddress:"",showConfirmEmailModal:!1,verificationEmailSent:!1,showConfirmPasswordModal:!1,wrongConfirmPassword:!1},this.handlePrimaryEmailVerification=this.handlePrimaryEmailVerification.bind(this),this.handleUserAccountSubmit=this.handleUserAccountSubmit.bind(this),this.handleNagBarEmailAddressChange=this.handleNagBarEmailAddressChange.bind(this),this.handleConfirmPasswordChange=this.handleConfirmPasswordChange.bind(this),this.confirmUserAccountSubmit=this.confirmUserAccountSubmit.bind(this),this.handleToggleConfirmEmailModal=this.handleToggleConfirmEmailModal.bind(this),this.emailVerificationSuccess=this.emailVerificationSuccess.bind(this),this.handleToggleConfirmPasswordModal=this.handleToggleConfirmPasswordModal.bind(this),this.userAccountSubmitFailure=this.userAccountSubmitFailure.bind(this),this.clearWrongConfirmPassword=this.clearWrongConfirmPassword.bind(this),this.userAccountSubmitSuccess=this.userAccountSubmitSuccess.bind(this)}handlePrimaryEmailVerification(){const e=C.a.getUserEmail(this.props.currentUser);e&&this.props.userAction.sendVerificationEmail(e,this.emailVerificationSuccess)}handleUserAccountSubmit(e){const t=C.a.isSsoUser(this.props.currentUser),a=C.a.isSyncUser(this.props.currentUserDetails);t||a?this.confirmUserAccountSubmit(e,!0):this.handleToggleConfirmPasswordModal()}handleNagBarEmailAddressChange(e){const t=e.target.value;this.setState({isSameEmail:t.trim()===this.props.primaryEmail.trim(),emailAddress:t})}confirmUserAccountSubmit(e,t){const a=this.props.confirmPasswordformValues&&this.props.confirmPasswordformValues.get("confirmPassword").trim();if(a||t){let e={secondary_email:this.state.emailAddress};t||(e=Object(S.a)({},e,{current_password:a}));const n=C.a.getId(this.props.currentUser);this.props.userAction.updateUserPassword(n,e,this.userAccountSubmitSuccess,this.userAccountSubmitFailure)}else e.preventDefault()}handleToggleConfirmEmailModal(){this.setState({showConfirmEmailModal:!this.state.showConfirmEmailModal})}emailVerificationSuccess(){this.handleToggleConfirmEmailModal(),this.setState({verificationEmailSent:!0})}handleToggleConfirmPasswordModal(){this.setState({showConfirmPasswordModal:!this.state.showConfirmPasswordModal}),this.clearWrongConfirmPassword(),this.props.userAction.clearConfirmPasswordForm()}userAccountSubmitFailure(){this.setState({wrongConfirmPassword:!0})}clearWrongConfirmPassword(){this.state.wrongConfirmPassword&&this.setState({wrongConfirmPassword:!1})}handleConfirmPasswordChange(){this.clearWrongConfirmPassword()}userAccountSubmitSuccess(){const e=C.a.isSsoUser(this.props.currentUser),t=C.a.isSyncUser(this.props.currentUserDetails);e||t||this.handleToggleConfirmPasswordModal(),this.clearWrongConfirmPassword()}render(){const e=C.a.getUserEmail(this.props.currentUser),t=this.props.secondaryEmail,a=this.props.isPrimaryEmailVerified,n=a?t:e,i=""===this.state.emailAddress||this.state.isSameEmail,o=C.a.isStudent(this.props.currentUser);return r.a.createElement("div",null,r.a.createElement("div",{className:!this.props.isPhoneNumberVerified&&this.props.phoneNumber?"primary-email-verification-container phone-number-verfication-header":"primary-email-verification-container"},r.a.createElement(_.u,null,!a&&r.a.createElement(_.f,{className:"primary-email-verification-card"},r.a.createElement("div",{className:"close-icon"},r.a.createElement("span",{className:"close",onClick:this.props.handleDismissNagbar})),r.a.createElement(_.g,{className:"primary-email-verification-body"},r.a.createElement(_.o,{className:"primary-email-text"},r.a.createElement(b.default,{string:"nagbar_confirm_email_Address",fallbackString:"Confirm your email address %{email}",insertions:{email:n}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-sm-5 my-2"},r.a.createElement(_.c,{className:"btn btn-primary primary-email-button qa-test-resend-confirmation-email",onClick:this.handlePrimaryEmailVerification},r.a.createElement(b.default,{string:"nagbar_resend_confirmation_email",fallbackString:"Re-send Confirmation Email"}))),r.a.createElement("div",{className:"col-xs-12 col-sm-2 my-2"},r.a.createElement(_.c,{to:R.a.SETTINGS_PAGE,className:"qa-test-change-email btn white-btn"},r.a.createElement(b.default,{string:"nag_bar_change_my_account's_email_address",fallbackString:"Change my account's email address"})))))),!t&&a&&!o&&r.a.createElement(_.f,{className:"primary-email-verification-card"},r.a.createElement("div",{className:"close-icon"},r.a.createElement("span",{className:"close",onClick:this.props.handleDismissNagbar})),r.a.createElement(_.g,{className:"primary-email-verification-body"},r.a.createElement(_.o,{className:"primary-email-text"},r.a.createElement(b.default,{string:"nag_bar_adding_secondary_email",fallbackString:"To ensure you can always recover your password, we recommend adding a second personal email address to your account."})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement(_.D,{name:"email-address",placeholder:this.props.translate("email","Email Address"),onChange:this.handleNagBarEmailAddressChange,className:"qa-test-secondary-email-textbox"}),this.state.isSameEmail&&r.a.createElement("small",{className:"required-error"},r.a.createElement(b.default,{string:"primary-secondary-email-same",fallbackString:"Your primary and secondary emails cannot be the same."}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn btn-primary primary-email-button qa-test-save-secondary-email",onClick:this.handleUserAccountSubmit,disabled:i},r.a.createElement(b.default,{string:"save",fallbackString:"Save"})))))))),this.state.showConfirmEmailModal&&r.a.createElement(A.a,{showConfirmEmailModal:this.state.showConfirmEmailModal,handleToggleConfirmEmailModal:this.handleToggleConfirmEmailModal,handlePrimaryEmailVerification:this.handlePrimaryEmailVerification,verificationEmailSent:this.state.verificationEmailSent,emailForVerification:e}),r.a.createElement(I.a,{showConfirmPasswordModal:this.state.showConfirmPasswordModal,handleToggleConfirmPasswordModal:this.handleToggleConfirmPasswordModal,confirmUserAccountSubmit:this.confirmUserAccountSubmit,handleSubmit:this.confirmUserAccountSubmit,wrongConfirmPassword:this.state.wrongConfirmPassword,handleConfirmPasswordChange:this.handleConfirmPasswordChange}))}}var y=Object(o.connect)((function(e,t){return{currentUser:h.e(e),abTestInfo:g.a(e),confirmPasswordformValues:Object(O.getFormValues)("confirmPassword")(e)}}),(function(e){return{nagBarActions:Object(i.bindActionCreators)(s,e),userAction:Object(i.bindActionCreators)(m,e)}}))(Object(N.a)(T)),P=a(152),v=a(2080),L=a(2390);class U extends n.Component{constructor(e){super(e),this.state={isResendConfirmationCodeModalOpen:!1},this.handleResendConfirmationCodeAction=this.handleResendConfirmationCodeAction.bind(this),this.onResendConfirmationCodeError=this.onResendConfirmationCodeError.bind(this),this.onResendConfirmationCodeSuccess=this.onResendConfirmationCodeSuccess.bind(this),this.closeModal=this.closeModal.bind(this)}handleResendConfirmationCodeAction(){const e=C.a.getId(this.props.currentUser),t={account_recovery:{phone_number:P.a.getUserPrimaryMobileNumber(this.props.userMobileNumbers),user_id:e,step:"resend_me_code"}};this.props.settingsActions.resendConfirmationCode(t,this.onResendConfirmationCodeError,this.onResendConfirmationCodeSuccess)}onResendConfirmationCodeError(){this.setState({isResendConfirmationCodeModalOpen:!1})}onResendConfirmationCodeSuccess(){this.setState({isResendConfirmationCodeModalOpen:!0})}closeModal(){this.setState({isResendConfirmationCodeModalOpen:!1})}render(){const e=P.a.getUserPrimaryMobileNumber(this.props.userMobileNumbers);return r.a.createElement("div",null,r.a.createElement("div",{className:"phone-number-verification-container"},r.a.createElement(_.u,null,r.a.createElement(_.f,{className:"phone-number-verification-card"},r.a.createElement(_.g,{className:"phone-number-verification-body"},r.a.createElement(_.o,null,r.a.createElement(b.default,{string:"verify-phone-number",fallbackString:"Verify your phone number to finish setting up your account."}),r.a.createElement("span",{className:"btn-right-align"},r.a.createElement(_.c,{className:"btn-primary-cta qa-verify-phone-number-nagbar",onClick:this.handleResendConfirmationCodeAction},r.a.createElement(b.default,{string:"verify_phone_number",fallbackString:"Verify Phone Number"})))))))),this.state.isResendConfirmationCodeModalOpen&&r.a.createElement(L.a,{phoneNumber:e,isResendConfirmationCodeModalOpen:!0,toggleModal:this.closeModal}))}}var D=Object(o.connect)((function(e,t){return{currentUser:h.c(e),userMobileNumbers:f.f(e),abTestInfo:g.a(e),accountRecoveries:f.a(e)}}),(function(e){return{nagBarActions:Object(i.bindActionCreators)(s,e),settingsActions:Object(i.bindActionCreators)(v,e)}}))(Object(N.a)(U)),M=(a(2477),a(162)),w=a(1199);class V extends n.Component{constructor(e){super(e),this.state={dismissEmailNagBar:!0},this.handlePrimaryEmailVerificationNagBarDismiss=this.handlePrimaryEmailVerificationNagBarDismiss.bind(this)}componentDidMount(){this.isHomePage()||this.props.userAction.fetchCurrentUser()}UNSAFE_componentWillReceiveProps(e){if(this.isHomePage()){const t=e.firstPageOfStreamLoaded&&!this.props.firstPageOfStreamLoaded,a=e.firstPageOfHomeStreamLoaded&&!this.props.firstPageOfHomeStreamLoaded;(t||a)&&e.currentUser&&e.currentUser.size>0&&this.props.currentUser!==e.currentUser&&(this.props.userAction.fetchCurrentUser(),this.fetchNagBarInfo())}else e.currentUser&&e.currentUser.size>0&&this.props.currentUser!==e.currentUser&&this.fetchNagBarInfo()}fetchNagBarInfo(){this.props.nagBarActions.fetchRelevantNagBar()}handlePrimaryEmailVerificationNagBarDismiss(){this.setState({dismissEmailNagBar:!1})}isHomePage(){return this.props.location.pathname.includes(R.a.HOME_PAGE)}render(){const e=C.a.getUserEmail(this.props.currentUser),t=this.props.secondaryEmail,a=C.a.isVerifiedTeacher(this.props.standardCurrentUser),n=p.a.isSettingPageNagBarEnabled(this.props.currentPage),i=this.props.isPrimaryEmailVerified,o=p.a.getUserPrimaryMobileNumberStatus(this.props.userMobileNumbers),s=P.a.getUserPrimaryMobileNumber(this.props.userMobileNumbers),c=P.a.isValid(s),u=P.a.isValid(t),m=P.a.isValid(e),h=p.a.showSecondaryEmailNagbar(n,this.state.dismissEmailNagBar,i,u,m);if(!this.props.relevantNagBar&&i&&t&&o)return null;let f;if(this.props.context)switch(this.props.relevantNagBar){case l.a.SCHOOL_CODE_VERIFICATION:a||(f=r.a.createElement(E.a,{context:d.a.NAG_BAR,closable:!0}));break;default:f=null}return!f&&!o&&c&&n?f=r.a.createElement(D,null):h&&(f=r.a.createElement(y,{handleDismissNagbar:this.handlePrimaryEmailVerificationNagBarDismiss,secondaryEmail:t,primaryEmail:e,isPrimaryEmailVerified:i,isPhoneNumberVerified:o,phoneNumber:s,closable:!0})),r.a.createElement(r.a.Fragment,null,f&&r.a.createElement("div",{id:"nag-bar-view-port",className:"nag-bars"},f))}}t.default=Object(w.a)(Object(o.connect)((function(e,t){return{relevantNagBar:u.g(e),currentUser:h.e(e),standardCurrentUser:h.c(e),userMobileNumbers:f.f(e),firstPageOfHomeStreamLoaded:M.m(e,t),firstPageOfStreamLoaded:M.j(e,{streamName:M.h(e)})}}),(function(e){return{nagBarActions:Object(i.bindActionCreators)(s,e),schoolActions:Object(i.bindActionCreators)(c,e),userAction:Object(i.bindActionCreators)(m,e)}}))(V))}}]);
//# sourceMappingURL=294.e85145fc.chunk.js.map